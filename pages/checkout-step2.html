<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Checkout - Pagamento (Pix)</title>
  <link rel="stylesheet" href="../styles/global.css">
  <link rel="stylesheet" href="../styles/checkout.css">
  <link rel="stylesheet" href="../styles/checkout-step2.css">
</head>
<body>
  <div class="main-container">
    <!-- header / back -->
    <div class="header-row">
      <a href="checkout.html" class="back-link">
        <img src="../assets/icons/left-arrow.webp" alt="Voltar" class="back-btn">
      </a>
      <div class="step-indicator small">Etapa 2 de 2</div>
    </div>

    <h1 class="page-title">Checkout</h1>

    <!-- product card (same style as previous) -->
    <div class="product-card">
      <img src="../assets/icons/product.webp" alt="Produto" class="product-icon">
      <div class="product-info">
        <div class="product-name">Nome do Produto</div>
        <div class="product-price">R$100</div>
      </div>
    </div>

    <!-- Pix info -->
    <div class="payment-section">
      <div class="payment-icon-wrap large">
        <img src="../assets/icons/pix.webp" alt="Pix" class="payment-icon">
      </div>
      <div class="payment-confirmation">
        <h2 class="success-title">Pedido gerado!<br><span>Agora finalize o pagamento</span></h2>

        <ol class="pix-steps">
          <li><strong>Abra o app do seu banco</strong> e entre na opção Pix.</li>
          <li><strong>Escolha a opção Pagar / Pix copia e cola.</strong></li>
          <li><strong>Copie e cole o código pix</strong> ou escaneie o QR code.</li>
          <li><strong>Depois, confirme</strong> o pagamento no app.</li>
        </ol>

        <p class="small-note">A aprovação leva no máximo 2 minutos.</p>

        <!-- copy code (example) -->
        <button id="copyPixBtn" class="btn-copy">COPIAR CÓDIGO PIX</button>

        <!-- QR Code placeholder (use your generated/qrcode image) -->
        <div class="qr-wrap">
          <img src="../assets/qrcode.webp" alt="QR Code Pix" class="qr-code">
        </div>

        <button id="confirmPaidBtn" class="btn-cta">Já fiz o pagamento</button>
      </div>
    </div>

  </div>

  <script>
    // Example PIX code (in real app this should be generated server-side)
    const pixCode = "00020126360014BR.GOV.BCB.PIX0114+5521999999995204000053039865406100.005802BR5925Nome do Recebedor6009CITYNAME62070503***6304ABCD";

    // copy to clipboard + visual feedback
    const copyBtn = document.getElementById('copyPixBtn');
    copyBtn.addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(pixCode);
        copyBtn.textContent = 'CÓDIGO COPIADO';
        copyBtn.style.backgroundColor = '#1fa35a';
        setTimeout(() => {
          copyBtn.textContent = 'COPIAR CÓDIGO PIX';
          copyBtn.style.backgroundColor = '';
        }, 2000);
      } catch (err) {
        alert('Não foi possível copiar automaticamente. Selecione e copie manualmente o código PIX.');
      }
    });

    // "Já fiz o pagamento" - in a real system you'd verify with backend
    document.getElementById('confirmPaidBtn').addEventListener('click', () => {
      // here you would call an endpoint that checks payment status or marks as "aguardando confirmação"
      alert('Obrigado — em um ambiente real o sistema verificará o pagamento e atualizará o pedido.');
      // example redirect back to homepage/dashboard:
      // window.location.href = 'index.html';
    });
  </script>
</body>
</html>
